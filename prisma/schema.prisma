generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model vendedor {
  id        Int       @id @default(autoincrement())
  nome      String    @db.VarChar(150)
  email     String?   @db.VarChar(150)
  tiny_id   Int?
  id_vendedor_externo String? @db.VarChar(100)
  clientes  cliente[]

  @@index([tiny_id], map: "idx_vendedor_tiny_id")
  @@index([id_vendedor_externo], map: "idx_vendedor_external_id")
}

model cliente {
  id                    Int       @id @default(autoincrement())
  external_id           BigInt    @unique(map: "uk_cliente_external_id") @db.UnsignedBigInt
  codigo                String?   @db.VarChar(30)
  nome                  String    @db.VarChar(200)
  fantasia              String?   @db.VarChar(200)
  endereco              String?   @db.VarChar(200)
  numero                String?   @db.VarChar(20)
  complemento           String?   @db.VarChar(100)
  bairro                String?   @db.VarChar(100)
  cep                   String?   @db.VarChar(20)
  cidade                String?   @db.VarChar(100)
  estado                String?   @db.VarChar(2)
  observacoes_contato   String?   @db.Text
  fone                  String?   @db.VarChar(50)
  fax                   String?   @db.VarChar(50)
  celular               String?   @db.VarChar(50)
  email                 String?   @db.VarChar(150)
  email_nfe             String?   @db.VarChar(150)
  site                  String?   @db.VarChar(150)
  tipo_pessoa           String?   @db.VarChar(1)
  cpf_cnpj              String?   @db.VarChar(20)
  ie_rg                 String?   @db.VarChar(20)
  ie_isento             Boolean?  @db.TinyInt
  situacao              String?   @db.VarChar(15)
  observacoes           String?   @db.Text
  estado_civil          String?   @db.VarChar(30)
  profissao             String?   @db.VarChar(100)
  sexo                  String?   @db.VarChar(10)
  data_nascimento       DateTime? @db.Date
  naturalidade          String?   @db.VarChar(100)
  nome_pai              String?   @db.VarChar(100)
  cpf_pai               String?   @db.VarChar(20)
  nome_mae              String?   @db.VarChar(100)
  cpf_mae               String?   @db.VarChar(20)
  lista_preco           String?   @db.VarChar(100)
  nome_vendedor         String?   @db.VarChar(150)
  email_nfe_envio       String?   @db.VarChar(150)
  tipos_contatos        String?   @db.Text
  contribuinte          String?   @db.VarChar(30)
  codigo_regime_tribut  Int?
  limite_credito        Decimal?  @db.Decimal(15, 2)
  id_vendedor_externo   String?   @db.VarChar(100)

  vendedor_id           Int?
  vendedor              vendedor? @relation(fields: [vendedor_id], references: [id], onDelete: SetNull)

  created_at            DateTime  @default(now()) @db.DateTime(0)
  updated_at            DateTime  @updatedAt @db.DateTime(0)

  @@index([nome], map: "idx_cliente_nome")
  @@index([cpf_cnpj], map: "idx_cliente_cpf_cnpj")
}

model supervisor {
  id                  Int      @id @default(autoincrement())
  id_vendedor_externo String   @unique @db.VarChar(100)
  nome                String?  @db.VarChar(150)
  created_at          DateTime @default(now()) @db.DateTime(0)
  updated_at          DateTime @updatedAt @db.DateTime(0)
  links               supervisor_vendor_links[]
}

model supervisor_vendor_links {
  id               Int      @id @default(autoincrement())
  supervisor_id    Int
  vendedor_externo String   @db.VarChar(100)
  created_at       DateTime @default(now()) @db.DateTime(0)

  supervisor       supervisor @relation(fields: [supervisor_id], references: [id], onDelete: Cascade)

  @@unique([supervisor_id, vendedor_externo], map: "uk_supervisor_vendor")
  @@index([vendedor_externo], map: "idx_supervised_vendor_external")
}

model telemarketing {
  id                  Int      @id @default(autoincrement())
  id_vendedor_externo String   @unique @db.VarChar(100)
  nome                String?  @db.VarChar(150)
  created_at          DateTime @default(now()) @db.DateTime(0)
  updated_at          DateTime @updatedAt @db.DateTime(0)
  cidades             telemarketing_city[]
}

model telemarketing_city {
  id               Int           @id @default(autoincrement())
  telemarketing_id Int
  cidade           String        @db.VarChar(150)
  created_at       DateTime      @default(now()) @db.DateTime(0)

  telemarketing    telemarketing @relation(fields: [telemarketing_id], references: [id], onDelete: Cascade)

  @@unique([telemarketing_id, cidade], map: "uk_telemarketing_city")
  @@index([cidade], map: "idx_telemarketing_city_name")
}
enum VendedorTipoAcesso {
  VENDEDOR
  TELEVENDAS
}

model vendedor_tipo_acesso {
  id                  Int                 @id @default(autoincrement())
  id_vendedor_externo String              @unique @db.VarChar(100)
  tipo                VendedorTipoAcesso
  created_at          DateTime            @default(now()) @db.DateTime(0)
  updated_at          DateTime            @updatedAt @db.DateTime(0)
}

enum PedidoStatus {
  PENDENTE
  PAGO
  CANCELADO
  FATURADO
  EM_ABERTO
  ENTREGUE
}

model platform_order {
  id                   Int           @id @default(autoincrement())
  numero               Int           @unique
  data                 DateTime      @db.Date
  cliente              String        @db.VarChar(255)
  cnpj                 String        @db.VarChar(20)
  total                Decimal       @default(0) @db.Decimal(15, 2)
  status               PedidoStatus
  id_vendedor_externo  String?       @db.VarChar(100)
  client_vendor_externo String?      @db.VarChar(100)
  user_id              BigInt        @db.UnsignedBigInt
  user                 wp_users      @relation(name: "UserOrders", fields: [user_id], references: [ID], onDelete: Restrict)
  created_at           DateTime      @default(now()) @db.DateTime(0)
  updated_at           DateTime      @updatedAt @db.DateTime(0)
  commissions          platform_commission[]
}

enum CommissionRole {
  VENDEDOR
  TELEVENDAS
}

model platform_commission {
  id                   Int            @id @default(autoincrement())
  order_num            Int
  beneficiary_externo  String         @db.VarChar(100)
  role                 CommissionRole
  percent              Decimal        @db.Decimal(5, 2)
  amount               Decimal        @db.Decimal(15, 2)
  created_at           DateTime       @default(now()) @db.DateTime(0)

  order                platform_order @relation(fields: [order_num], references: [numero], onDelete: Cascade, map: "fk_commission_order")

  @@index([beneficiary_externo], map: "idx_commission_beneficiary")
  @@index([order_num], map: "idx_commission_order")
}
model access_level {
  id   Int    @id @default(autoincrement())
  name String @db.VarChar(1024)
}

model payment {
  id            Int     @id @default(autoincrement())
  number        BigInt
  id_account    Int?
  file          String? @db.VarChar(255)
  emiter        String  @db.VarChar(255)
  destine       String  @db.VarChar(255)
  email_destine String? @db.VarChar(150)
  method        Int
  observation   String  @db.VarChar(2048)
  income        Int     @db.TinyInt
  serie         Int?

  @@unique([number, emiter, serie], map: "UNIQUE_NUMBER")
}

model wp_users {
  ID                  BigInt   @id @default(autoincrement()) @db.UnsignedBigInt
  user_login          String   @default("") @db.VarChar(60)
  user_pass           String   @default("") @db.VarChar(255)
  user_nicename       String   @default("") @db.VarChar(50)
  user_email          String   @default("") @db.VarChar(100)
  user_url            String   @default("") @db.VarChar(100)
  user_registered     DateTime @default(dbgenerated("'0000-00-00 00:00:00'")) @db.DateTime(0)
  user_activation_key String   @default("") @db.VarChar(255)
  user_status         Int      @default(0)
  display_name        String   @default("") @db.VarChar(250)
  access_level        Int      @default(1)
  platform_orders     platform_order[] @relation("UserOrders")

  @@index([user_email], map: "user_email")
  @@index([user_login], map: "user_login_key")
  @@index([user_nicename], map: "user_nicename")
}

model account {
  id   Int    @id @default(autoincrement())
  code Int
  name String @db.VarChar(255)
}

model account_value {
  id         Int      @id @default(autoincrement())
  id_account Int
  id_user    Int
  value      Float    @db.Float
  old_value  Float    @db.Float
  date       DateTime @db.DateTime(0)
}

model balcony_branch {
  id        Int @id @default(autoincrement())
  id_user   Int
  id_branch Int
}

model balcony_values {
  id                Int      @id @default(autoincrement())
  user_id           Int
  branch_office_id  Int
  insert_date       DateTime @db.DateTime(0)
  card              Float
  cash              Float
  pix               Float
  user_last_changed Int?
}

model branch_office {
  id   Int    @id @default(autoincrement())
  name String @db.VarChar(255)
}

model closure {
  id               Int      @id @default(autoincrement())
  increase         Float
  removed          Float
  branch_office_id Int
  date             DateTime @db.DateTime(0)
}

model expense {
  id               Int       @id @default(autoincrement())
  branch_office_id Int?
  provider         String    @db.VarChar(255)
  value            Float     @db.Float
  payment_date     DateTime? @db.Date
  approved_date    DateTime? @db.Date
  description      String?   @db.Text
  status           Int       @db.TinyInt
  expense_type     Int       @db.TinyInt
  category         Int?
}

model expense_type {
  id   Int    @id @default(autoincrement())
  name String @db.VarChar(255)
}

model hands_balance {
  id    Int      @id @default(autoincrement())
  name  String   @db.VarChar(255)
  value Float    @db.Float
  date  DateTime @db.DateTime(0)
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model imports {
  number Int

  @@ignore
}

model income {
  id    Int    @id @default(autoincrement())
  value Int
  name  String @db.VarChar(75)
}

model login {
  id       Int    @id @default(autoincrement())
  name     String @db.VarChar(255)
  user     String @db.VarChar(255)
  password String @db.VarChar(255)
  sistem   String @db.VarChar(255)
}

model payment_date {
  id            Int       @id @default(autoincrement())
  id_payment    Int
  number        BigInt
  parcel_value  Float     @db.Float
  parcel_date   DateTime  @db.Date
  approved_date DateTime? @db.Date
  status        Int       @db.TinyInt
  insert_date   DateTime? @db.DateTime(0)
  inserted_by   Int?
}

model payment_method {
  id   Int    @id @default(autoincrement())
  code Int
  name String @db.VarChar(155)
}

model payment_status {
  id   Int    @id
  code Int
  name String @db.VarChar(75)
}

model payment_xml_log {
  id             Int       @id @default(autoincrement())
  chave_acesso   String    @db.VarChar(50)
  numero_nfe     String?   @db.VarChar(20)
  emiter         String?   @db.VarChar(255)
  destine        String?   @db.VarChar(255)
  payment_method String?   @db.VarChar(10)
  parcel_value   String?   @db.Text
  parcel_date    String?   @db.Text
  observation    String?   @db.Text
  xml_content    String?   @db.LongText
  error_message  String?   @db.Text
  created_at     DateTime? @default(now()) @db.DateTime(0)
}

model permissions {
  code Int    @id @default(autoincrement())
  name String @db.VarChar(155)
}

model prevision_registred {
  id         Int      @id @default(autoincrement())
  year_month DateTime @db.Date
  value      Float?   @db.Float
  accounts   String   @db.VarChar(100)
}

model product {
  id           Int    @id @default(autoincrement())
  code         String @db.VarChar(20)
  name         String @db.VarChar(255)
  description  String @db.VarChar(255)
  value_sistem Int
  value_web    Int
  shipping     Int
  marcap       Int
  value_exit   Int
  link         String @db.Text
}

model table_save {
  id      Int      @id @default(autoincrement())
  id_user Int
  date    DateTime @db.DateTime(0)
  data    String   @db.MediumText
}

model tiny_order_products {
  id          Int         @id @default(autoincrement()) @db.UnsignedInt
  pedido_id   BigInt      @db.UnsignedBigInt
  produto_id  BigInt      @db.UnsignedBigInt
  codigo      String?     @db.VarChar(100)
  nome        String?     @db.VarChar(255)
  categoria   String?     @db.VarChar(255)
  preco       Decimal?    @db.Decimal(15, 2)
  preco_custo Decimal?    @db.Decimal(15, 2)
  quantidade  Decimal     @default(1.000) @db.Decimal(15, 3)
  created_at  DateTime    @default(now()) @db.DateTime(0)
  tiny_orders tiny_orders @relation(fields: [pedido_id], references: [pedido_id], onDelete: Cascade, map: "fk_tiny_order_products_pedido")

  @@unique([pedido_id, produto_id], map: "uk_tiny_order_products_pedido_produto")
  @@index([produto_id], map: "idx_tiny_order_products_produto")
}

model tiny_orders {
  id                  Int                   @id @default(autoincrement()) @db.UnsignedInt
  pedido_id           BigInt                @unique(map: "uk_tiny_orders_pedido_id") @db.UnsignedBigInt
  numero_pedido       String?               @db.VarChar(50)
  total_pedido        Decimal?              @db.Decimal(15, 2)
  id_vendedor         BigInt?               @db.UnsignedBigInt
  nome_vendedor       String?               @db.VarChar(150)
  forma_pagamento     String?               @db.VarChar(100)
  deposito            String?               @db.VarChar(100)
  cliente_nome        String?               @db.VarChar(200)
  full_response       Json?
  created_at          DateTime              @db.DateTime(0)
  updated_at          DateTime?             @db.DateTime(0)
  tiny_order_products tiny_order_products[]

  @@index([cliente_nome], map: "idx_tiny_orders_cliente")
  @@index([numero_pedido], map: "idx_tiny_orders_numero")
  @@index([id_vendedor], map: "idx_tiny_orders_vendedor")
}

model tiny_raw_logs {
  id          Int      @id @default(autoincrement())
  method      String?  @db.VarChar(10)
  headers     String?  @db.Text
  body        String?  @db.LongText
  ip_address  String?  @db.VarChar(45)
  user_agent  String?  @db.VarChar(255)
  received_at DateTime @db.DateTime(0)
}

model tiny_webhooks {
  id          Int      @id @default(autoincrement())
  payload     Json
  received_at DateTime @db.DateTime(0)
}

model user_branch {
  id        Int @id @default(autoincrement())
  id_user   Int
  id_branch Int
}
